<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Thống kê</title>
        <link rel="icon" href="../../images/tab_icon.png">
        <meta name="Description" content="Phùng Tín Phong - N19DCCN139">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.0/normalize.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lykmapipo/themify-icons@0.1.2/css/themify-icons.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pixeden-stroke-7-icon@1.2.3/pe-icon-7-stroke/dist/pe-icon-7-stroke.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.0/css/flag-icon.min.css">
        <link rel="stylesheet" href="../../css/admin/cs-skin-elastic.css">
        <link rel="stylesheet" href="../../css/admin/morris.css">
        <link rel="stylesheet" href="../../css/admin/style.css">
        <link rel="stylesheet" href="../../css/notification.css">
    </head>
    <body onload="init()">
        <aside id="left-panel" class="left-panel">
            <nav class="navbar navbar-expand-sm navbar-default">
                <div id="main-menu" class="main-menu collapse navbar-collapse" style="background-color:#a5e6e6">
                    <ul class="nav navbar-nav">
                        <li class="active" style="display:flex; background-color:#aedfe6">
                            <img id="avatar-main" src="" onerror="this.src='../../images/no-avatar.jpg'" alt="" style="width:50px; height:50px; margin-top:10px; margin-bottom:10px; border-radius:50%">
                            <div id="account-main" style="width:200px; margin-left:5px; line-height:9.0em; font-size:12px; color:black; overflow: hidden; text-overflow: ellipsis">Tên tài khoản</div>
                        </li>
                        <li class="menu-title" style="margin-top:-37px; background-color:#1daba8;">QUẢN LÝ</li>
                        <li class="menu-item-has-children dropdown" style="background-color:#a5e6e6; border-bottom:1px solid #8db4c7">
                            <a class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="cursor:pointer">
                                <i class="menu-icon fa fa-cogs"></i>
                                Quyền
                            </a>
                            <ul class="sub-menu children dropdown-menu" style="background-color:#a5e6e6">
                                <li style="background-color:#a5e6e6; cursor:pointer">
                                    <i class="fa fa-lock" style="color:darkgray"></i>
                                    <a onclick="checkRole('DM1', 'Q1', '../../html/admin/authorization.html')">Phân quyền</a>
                                </li>
                                <li style="background-color:#a5e6e6; cursor:pointer">
                                    <i class="fa fa-server" style="color:darkgray"></i>
                                    <a onclick="checkRole('DM2', 'Q1', '../../html/admin/interface.html')">Xem danh mục</a>
                                </li>
                                <li style="background-color:#a5e6e6; cursor:pointer">
                                    <i class="fa fa-handshake-o" style="color:darkgray"></i>
                                    <a onclick="checkRole('DM3', 'Q1', '../../html/admin/role.html')">Xem quyền</a>
                                </li>
                            </ul>
                        </li>
                        <li class="menu-item-has-children dropdown" style="background-color:#a5e6e6; border-bottom:1px solid #8db4c7">
                            <a class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="cursor:pointer">
                                <i class="menu-icon fa fa-user-circle-o"></i>
                                Tài khoản
                            </a>
                            <ul class="sub-menu children dropdown-menu" style="background-color:#a5e6e6">
                                <li style="background-color:#a5e6e6; cursor:pointer">
                                    <i class="fa fa-info-circle" style="color:darkgray"></i>
                                    <a onclick="checkRole('DM4', 'Q1', '../../html/admin/personal-profile.html')">Thông tin cá nhân</a>
                                </li>
                                <li style="background-color:#a5e6e6; cursor:pointer">
                                    <i class="fa fa-key" style="color:darkgray"></i>
                                    <a onclick="checkRole('DM5', 'Q1', '../../html/admin/change-password.html')">Đổi mật khẩu</a>
                                </li>
                            </ul>
                        </li>
                        <li class="menu-item-has-children dropdown" style="background-color:#a5e6e6">
                            <a class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="cursor:pointer">
                                <i class="menu-icon fa fa-user"></i>
                                Người dùng
                            </a>
                            <ul class="sub-menu children dropdown-menu" style="background-color:#a5e6e6">
                                <li style="background-color:#a5e6e6; cursor:pointer">
                                    <i class="menu-icon fa fa-male" style="color:darkgray"></i>
                                    <a onclick="checkRole('DM6', 'Q1', '../../html/admin/staff.html')">Nhân viên</a>
                                </li>
                                <li style="background-color:#a5e6e6; cursor:pointer">
                                    <i class="menu-icon fa fa-child" style="color:darkgray"></i>
                                    <a onclick="checkRole('DM7', 'Q1', '../../html/admin/customer.html')">Khách hàng</a>
                                </li>
                            </ul>
                        </li>

                        <li class="menu-title" style="background-color:#1daba8;">DANH MỤC</li><!-- /.menu-title -->

                        <li style="background-color:#a5e6e6; border-bottom:1px solid #8db4c7; cursor:pointer">
                            <a onclick="checkRole('DM8', 'Q1', '../../html/admin/department.html')">
                                <i class="menu-icon fa fa-hospital-o"></i>
                                Chuyên khoa
                            </a>
                        </li>
                        <li style="background-color:#a5e6e6; border-bottom:1px solid #8db4c7; cursor:pointer">
                            <a onclick="checkRole('DM9', 'Q1', '../../html/admin/doctor.html')">
                                <i class="menu-icon fa fa-medkit"></i>
                                Bác sĩ
                            </a>
                        </li>
                        <li style="background-color:#a5e6e6; border-bottom:1px solid #8db4c7; cursor:pointer">
                            <a onclick="checkRole('DM10', 'Q1', '../../html/admin/package.html')">
                                <i class="menu-icon fa fa-money"></i>
                                Gói khám
                            </a>
                        </li>
                        <li style="background-color:#a5e6e6; cursor:pointer">
                            <a onclick="checkRole('DM11', 'Q1', '../../html/admin/disease.html')">
                                <i class="menu-icon fa fa-heartbeat"></i>
                                Bệnh
                            </a>
                        </li>
                        <li class="menu-title" style="background-color:#1daba8;">NGHIỆP VỤ</li><!-- /.menu-title -->
                        <li style="background-color:#a5e6e6; border-bottom:1px solid #8db4c7; cursor:pointer">
                            <a onclick="checkRole('DM12', 'Q1', '../../html/admin/schedule.html')">
                                <i class="menu-icon fa fa-calendar"></i>
                                Lịch khám
                            </a>
                        </li>
                        <li style="background-color:#a5e6e6; cursor:pointer">
                            <a onclick="checkRole('DM14', 'Q1', '../../html/admin/statistics.html')">
                                <i class="menu-icon fa fa-area-chart"></i>
                                Thống kê
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>
        <div id="right-panel" class="right-panel">
            <header id="header" class="header" style="background: linear-gradient(-90deg, rgba(2, 167, 182, 0.9), rgba(1, 82, 89, 0.9));">
                <div id="error-notification" class="toast toast--red" style="display:none">
                    <div class="toast__icon">
                        <svg class="toast__svg" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
                                    <g>
                                        <g>
                                            <path d="M504.502,75.496c-9.997-9.998-26.205-9.998-36.204,0L161.594,382.203L43.702,264.311c-9.997-9.998-26.205-9.997-36.204,0    c-9.998,9.997-9.998,26.205,0,36.203l135.994,135.992c9.994,9.997,26.214,9.99,36.204,0L504.502,111.7    C514.5,101.703,514.499,85.494,504.502,75.496z"></path>
                                        </g>
                                    </g>
                                </svg>
                    </div>
                    <div class="toast__content">
                        <p class="toast__type">Đã xảy ra lỗi</p>
                        <p id="error-message" class="toast__message"></p>
                    </div>
                </div>
                <div id="success-notification" class="toast toast--green" style="display:none">
                    <div class="toast__icon">
                        <svg class="toast__svg" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
                                    <g>
                                        <g>
                                            <path d="M504.502,75.496c-9.997-9.998-26.205-9.998-36.204,0L161.594,382.203L43.702,264.311c-9.997-9.998-26.205-9.997-36.204,0    c-9.998,9.997-9.998,26.205,0,36.203l135.994,135.992c9.994,9.997,26.214,9.99,36.204,0L504.502,111.7    C514.5,101.703,514.499,85.494,504.502,75.496z"></path>
                                        </g>
                                    </g>
                                </svg>
                    </div>
                    <div class="toast__content">
                        <p class="toast__type">Xử lý thành công</p>
                        <p id="success-message" class="toast__message"></p>
                    </div>
                </div>
                <div class="top-right">
                    <div class="header-menu">
                        <div class="header-left">
                            <button class="search-trigger">
                                <a href="main.html"><i class="fa fa-home" style="color:white"></i></a>
                            </button>
                            <button class="search-trigger">
                                <a><i class="fa fa-sign-out" style="color:white" onclick="logOut()"></i></a>
                            </button>
                        </div>
                    </div>
                </div>
            </header>
            <div class="content">
                <nav class="navbar navbar-expand-custom navbar-mainbg" style="width:100%">
                    <div id="navbarSupportedContent" class="collapse navbar-collapse">
                        <ul class="navbar-nav" style="text-align:center">
                            <li class="active" style="width:185px; height:50px; display:flex; flex-direction:row; align-items:center; color:#ffffff; cursor:pointer" onclick="loadCustomerData()">
                                &nbsp;&nbsp;&nbsp;&nbsp;Khách hàng
                            </li>
                            <li style="width:185px; height:50px; display:flex; flex-direction:row; align-items:center; color:#ffffff; cursor:pointer" onclick="loadDoctorData()">
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bác sĩ
                            </li>
                            <li style="width:185px; height:50px; display:flex; flex-direction:row; align-items:center; color:#ffffff; cursor:pointer" onclick="loadPackageData()">
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gói khám
                            </li>
                            <li style="width:185px; height:50px; display:flex; flex-direction:row; align-items:center; color:#ffffff; cursor:pointer" onclick="loadDiseaseData()">
                                &nbsp;&nbsp;&nbsp;&nbsp;Nhóm bệnh
                            </li>
                            <li style="width:185px; height:50px; display:flex; flex-direction:row; align-items:center; color:#ffffff; cursor:pointer" onclick="loadBookData()">
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Đặt khám
                            </li>
                        </ul>
                    </div>
                </nav>
                <div style="text-align:right">
                    <button id="printer" class="btn btn-outline-danger text-nowrap" style="margin:5px"><i class="fa fa-print mr-1"></i>In báo cáo</button>
                    <button class="btn btn-outline-success text-nowrap" style="margin:5px" onclick="exportToExcel()"><i class="fa fa-file-excel-o mr-1"></i>Xuất Excel</button>
                </div>
                <div id="report">
                    <div class="card">
                        <div class="card-body" style="display:flex">
                            <div style="width:100%">
                                <h3 id="report-title" style="text-align:center; background-color:#f2f2f2; padding:20px; font-size:24px; font-weight:bold; color:brown"></h3>
                                <div style="display: flex">
                                    <h5 class="box-title" style="margin-left:0; margin-right:auto;">Báo cáo được lập tại:</h5>
                                    <h6 style="font-family:Arial, FontAwesome, sans-serif; font-size:14px; margin-left:auto; margin-right:10px; line-height: 1.8em">
                                        <a class="link" href="../index.html">BookingCare.vn</a>
                                    </h6>
                                </div>
                                <div style="display: flex">
                                    <h5 class="box-title" style="margin-left:0; margin-right:auto;">Loại hình kinh doanh:</h5>
                                    <h6 style="font-family:Arial, FontAwesome, sans-serif; font-size:14px; color:#000000; margin-left:auto; margin-right:10px; line-height: 1.8em">Y tế & Sức khỏe</h6>
                                </div>
                                <div style="display: flex">
                                    <h5 class="box-title" style="margin-left:0; margin-right:auto;">Nhân viên lập:</h5>
                                    <h6 id="staff-name" style="font-family:Arial, FontAwesome, sans-serif; font-size:14px; color:#000000; margin-left:auto; margin-right:10px; line-height: 1.8em"></h6>
                                </div>
                                <div style="display:flex">
                                    <h5 class="box-title" style="margin-left:0; margin-right:auto;">Ngày lập:</h5>
                                    <h6 id="date-now" style="font-family:Arial, FontAwesome, sans-serif; font-size:14px; color:#000000; margin-left:auto; margin-right:10px; line-height: 1.8em"></h6>
                                </div>
                                <div id="month-section" style="display:none">
                                    <h5 class="box-title" style="margin-right:20px">Trong tháng:</h5>
                                    <select id="month" class="form-control form-control-sm" style="width:200px; font-family:Arial, FontAwesome, sans-serif; font-size:14px; color:#000000; margin-left:auto; margin-right:0; border:none; direction:rtl" onchange="changeReport()"></select>
                                </div>
                                <div id="year-section" style="display:none">
                                    <h5 class="box-title" style="margin-right:20px">Trong năm:</h5>
                                    <select id="year" class="form-control form-control-sm" style="width:200px; font-family:Arial, FontAwesome, sans-serif; font-size:14px; color:#000000; margin-left:auto; margin-right:0; border:none; direction:rtl" onchange="changeReport()"></select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="table-responsive" style="height:300px; overflow:scroll; overflow-x:auto">
                            <table id="statistics-table" class="table table-bordered table-hover">
                                <thead style="position:sticky; top:0; padding:8px"></thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    <div class="card" style="width:100%">
                        <div class="card-body" style="display:flex">
                            <h4 class="box-title">Biểu đồ thống kê tổng quan</h4>
                        </div>
                    </div>
                    <h4 id="x-title" class="card-title"></h4>
                    <div id="chart" style="width:100%; height:500px; padding-bottom:100px"></div>
                    <h4 id="y-title" class="card-title" style="width:100%; text-align:center"></h4>
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.4/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery-match-height@0.7.2/dist/jquery.matchHeight.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.7.3/dist/Chart.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartist@0.11.0/dist/chartist.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartist-plugin-legend@0.6.2/chartist-plugin-legend.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery.flot@0.8.3/jquery.flot.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/flot-pie@1.0.0/src/jquery.flot.pie.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/flot-spline@0.0.1/js/jquery.flot.spline.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/simpleweather@3.1.0/jquery.simpleWeather.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/moment.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/fullcalendar@3.9.0/dist/fullcalendar.min.js"></script>
        <script src="../../js/lib/jquery.min.js"></script>
        <script src="../../js/lib/raphael.min.js"></script>
        <script src="../../js/lib/morris.min.js"></script>
        <script src="../../js/admin/statistics.js" type="text/javascript"></script>
        <script type="text/javascript">
            function test(){
                $("#navbarSupportedContent").on("click","li", function(){
                    $('#navbarSupportedContent ul li').removeClass("active");
                    $(this).addClass("active");
                });
            }
            $(document).ready(function(){
                setTimeout(function(){ test(); });
            });
            $(window).on('resize', function(){
                setTimeout(function(){ test(); }, 500);
            });
            $(".navbar-toggler").click(function(){
                $(".navbar-collapse").slideToggle(300);
                setTimeout(function(){ test(); });
            });
        </script>
    </body>
</html>
